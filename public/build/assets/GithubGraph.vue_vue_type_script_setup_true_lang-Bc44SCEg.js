import{u as w}from"./githubStore-Dbw9vqhZ.js";import{i as b,g as k,_ as x}from"./GithubTile.vue_vue_type_script_setup_true_lang-BH0DkY8L.js";import{_ as F}from"./GithubLegendFakeTile.vue_vue_type_script_setup_true_lang-LDPj0ycy.js";import{d as C,k as y,c as l,a as s,f as h,j as Y,F as _,E as m,b as v}from"./app-BP2LmRQo.js";const E={class:"flex flex-col gap-1 overflow-y-auto py-2"},G={class:"flex gap-1"},L=C({__name:"GithubGraph",setup(S){const c=w();function D(r){if(console.log(r),!r)return{row:-1,col:-1};if(r.getFullYear()!=c.selected_year)throw new Error("selectedYear from githubStore != given date");const a=k(r),n=Math.floor((a-1)/7);let o=r.getDay()-1;return o==-1&&(o=6),{row:o,col:n}}const i=y(()=>Math.ceil((b(c.selected_year)?366:365)/7)),d=y(()=>{var g;const r=c.selected_year,a=[];for(let t=0;t<7;t++){a[t]=[];for(let e=0;e<i.value;e++)a[t][e]={contributionData:null,row:t,column:e}}const n=new Date(r,0,1);let o=n.getDay();o-=1,o==-1&&(o=6);let u=new Date(n);for(let t=0;t<i.value;t++)for(let e=0;e<7;e++)t===0&&e<o||u.getFullYear()===r&&(a[e][t].date=new Date(u),u.setDate(u.getDate()+1));const f=c.data_by_year;return f&&((g=f.get(r))!=null&&g.github_records)&&f.get(r).github_records.forEach(t=>{try{if(!t.date)return;const{row:e,col:p}=D(t.date);a[e]&&a[e][p]&&(a[e][p].contributionData=t)}catch(e){console.error("Error processing GitHub record:",e)}}),a});return(r,a)=>(s(),l("div",E,[h("div",G,[(s(!0),l(_,null,m(i.value,n=>(s(),l("div",null,[v(F)]))),256))]),d.value!=null?(s(),l(_,{key:0},m(7,n=>h("div",{key:`row-${n}`,class:"flex gap-1"},[(s(!0),l(_,null,m(i.value,o=>(s(),l("div",{key:`col-${n}-${o}`},[v(x,{tileData:d.value[n-1][o-1]},null,8,["tileData"])]))),128))])),64)):Y("",!0)]))}});export{L as _};
