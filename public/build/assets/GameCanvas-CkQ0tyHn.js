import{d as E,k as c,l as b,o as A,m as R,c as f,a as w,f as B,g as S,t as y}from"./app-CILYoJyI.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={key:0,class:"info"},D={key:1,class:"loading-indicator"},L=361,G=E({__name:"GameCanvas",setup(K){function h(e,t){return(e%t+t)%t}const r=c(null);let i=null;const l=c({x:0,y:0}),a=c({x:400,y:300,width:50,height:100,angle:0,constantSpeed:2.5}),u=c({}),_=[],o=new Image,g=c(0),v=b(()=>g.value===L);A(()=>{const e=r.value;if(!e)return;i=e.getContext("2d"),a.value.x=e.width/2,a.value.y=e.height/2;const t=()=>{g.value++,v.value&&(l.value.x=o.width/2-e.width/2,l.value.y=o.height/2-e.height/2,I())};o.onload=t,o.src="/images/pozadie.png";for(let n=0;n<360;n++){const s=new Image,d=n.toString().padStart(3,"0");s.src=`/images/lietadla/lietadlo_${d}.png`,s.onload=t,_.push(s)}window.addEventListener("keydown",k),window.addEventListener("keyup",x)}),R(()=>{window.removeEventListener("keydown",k),window.removeEventListener("keyup",x)});const k=e=>{u.value[e.key]=!0},x=e=>{u.value[e.key]=!1},C=()=>{u.value.ArrowLeft&&(a.value.angle-=3),u.value.ArrowRight&&(a.value.angle+=3),a.value.angle=h(a.value.angle,360);const t=(a.value.angle-90)*(Math.PI/180),n=a.value.constantSpeed*Math.cos(t),s=a.value.constantSpeed*Math.sin(t);l.value.x+=n,l.value.y+=s},M=()=>{if(!i||!r.value||!v.value)return;const e=r.value;if(i.clearRect(0,0,e.width,e.height),o.width>0){const s=h(l.value.x,o.width),d=h(l.value.y,o.height);for(let m=-s;m<e.width;m+=o.width)for(let p=-d;p<e.height;p+=o.height)i.drawImage(o,m,p)}const t=Math.round(a.value.angle)%360,n=_[t];if(n&&n.complete){const s=n.naturalWidth,d=n.naturalHeight;i.drawImage(n,a.value.x-s/2,a.value.y-d/2,s,d)}},I=()=>{v.value&&(C(),M()),requestAnimationFrame(I)};return(e,t)=>(w(),f("div",null,[B("canvas",{ref_key:"canvasRef",ref:r,width:"800",height:"600",style:{border:"1px solid black"}},null,512),a.value?(w(),f("div",z," Aktuálny uhol lietadla (v stupňoch): "+y(Math.round(a.value.angle))+"° ",1)):S("",!0),v.value?S("",!0):(w(),f("div",D," Načítavam obrázky ("+y(g.value)+" / "+y(L)+")... ",1))]))}}),V=N(G,[["__scopeId","data-v-6daf9793"]]);export{V as default};
