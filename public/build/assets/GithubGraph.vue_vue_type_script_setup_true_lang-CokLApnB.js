import{u as w}from"./githubStore-CWhryvk0.js";import{i as b,g as x}from"./dateHelper-BLAihvFh.js";import{_ as C}from"./GithubLegendFakeTile.vue_vue_type_script_setup_true_lang-sj5A5jAt.js";import{_ as F}from"./GithubTile.vue_vue_type_script_setup_true_lang-CPRgrElw.js";import{d as k,l as y,c as l,a as s,f as h,g as Y,F as _,C as m,b as v}from"./app-CILYoJyI.js";const G={class:"flex flex-col gap-1 overflow-y-auto py-2"},S={class:"flex gap-1"},M=k({__name:"GithubGraph",setup($){const c=w();function D(o){if(!o)return{row:-1,col:-1};if(o.getFullYear()!=c.selected_year)throw new Error("selectedYear from githubStore != given date");const a=x(o),n=Math.floor((a-1)/7);let r=o.getDay()-1;return r==-1&&(r=6),{row:r,col:n}}const i=y(()=>Math.ceil((b(c.selected_year)?366:365)/7)),d=y(()=>{var g;const o=c.selected_year,a=[];for(let t=0;t<7;t++){a[t]=[];for(let e=0;e<i.value;e++)a[t][e]={contributionData:null,row:t,column:e}}const n=new Date(o,0,1);let r=n.getDay();r-=1,r==-1&&(r=6);let u=new Date(n);for(let t=0;t<i.value;t++)for(let e=0;e<7;e++)t===0&&e<r||u.getFullYear()===o&&(a[e][t].date=new Date(u),u.setDate(u.getDate()+1));const f=c.data_by_year;return f&&((g=f.get(o))!=null&&g.github_records)&&f.get(o).github_records.forEach(t=>{try{if(!t.date)return;const{row:e,col:p}=D(t.date);a[e]&&a[e][p]&&(a[e][p].contributionData=t)}catch(e){console.error("Error processing GitHub record:",e)}}),a});return(o,a)=>(s(),l("div",G,[h("div",S,[(s(!0),l(_,null,m(i.value,n=>(s(),l("div",null,[v(C)]))),256))]),d.value!=null?(s(),l(_,{key:0},m(7,n=>h("div",{key:`row-${n}`,class:"flex gap-1"},[(s(!0),l(_,null,m(i.value,r=>(s(),l("div",{key:`col-${n}-${r}`},[v(F,{tileData:d.value[n-1][r-1]},null,8,["tileData"])]))),128))])),64)):Y("",!0)]))}});export{M as _};
